<html>
<head>
	<title>Friends Page</title>
	<script src="https://www.gstatic.com/firebasejs/5.0.2/firebase.js"></script>
	<script>
	  // Initialize Firebase
	  var config = {
	    apiKey: "AIzaSyCFp8GQ4X6bk445Hlit2RDgjLrZboYxBw0",
	    authDomain: "cogs121project-b08aa.firebaseapp.com",
	    databaseURL: "https://cogs121project-b08aa.firebaseio.com",
	    projectId: "cogs121project-b08aa",
	    storageBucket: "",
	    messagingSenderId: "962818010492"
	  };
	  firebase.initializeApp(config);
	</script>

	<script src="https://code.jquery.com/jquery.js"></script>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>

	<script type="text/javascript">
	$(document).ready(() => {
		const database = firebase.database();

		$('#showFriends').click(() => {
			database.ref('users/Shawn/friends').once('value', (snapshot) => {
	      const data = snapshot.val();
				$('#result').html(''); // clear the HTML
	      $('#result').append('My friends:');
	      Object.keys(data).forEach((name) => {
	        $('#result').append('<li>' + data[name] + '</li>');
	      });
	    });
		});

		$('#addFriend').click(() => {
			database.ref('users/Shawn/friends').once('value', (snapshot) => {
	      const data = snapshot.val();
	      num = Object.keys(data).length + 1;
				console.log(data);
				console.log(num);
				database.ref('users/Shawn/friends/' + num).set($('#addFriendBox').val());
	    });
		});

	});//doc ready

	</script>

</head>
<body>
	<div class="container-fluid">
	  <div class="col-xs-12">
	    <h1>Friend Page</h1>
	    <hr>
	  </div>
		<hr>
	  	<input id="addFriendBox" type="text" placeholder="Friend name" size="20"/>
	  	<button id="addFriend"> Add friend </button>
	  <hr/>
		<button id="showFriends">Show my friends</button>
		<div class="jumbotron">
			<div id="result"></div>
		</div>
	</div>

	<canvas id="myChart" width="400" height="400"></canvas>
	<script>
	var ctx = document.getElementById("myChart");
	var myChart = new Chart(ctx, {
	    type: 'radar',
	    data: {
	        labels: ["COGS120", "COGS121", "COGS17", "COGS100", "COGS1", "COGS10"],
	        datasets: [{
	            label: '# of people attending',
	            data: [12, 19, 20, 5, 15, 13],
	            backgroundColor: [
	                'rgba(255, 99, 132, 0.2)',
	                'rgba(54, 162, 235, 0.2)',
	                'rgba(255, 206, 86, 0.2)',
	                'rgba(75, 192, 192, 0.2)',
	                'rgba(153, 102, 255, 0.2)',
	                'rgba(255, 159, 64, 0.2)'
	            ],
	            borderColor: [
	                'rgba(255,99,132,1)',
	                'rgba(54, 162, 235, 1)',
	                'rgba(255, 206, 86, 1)',
	                'rgba(75, 192, 192, 1)',
	                'rgba(153, 102, 255, 1)',
	                'rgba(255, 159, 64, 1)'
	            ],
	            borderWidth: 3
	        }]
	    },
	    options: {
	        scales: {
	            yAxes: [{
	                ticks: {
	                    beginAtZero:true
	                }
	            }]
	        }
	    }
	});
	</script>
</body>
</html>
